import{a as d,u as x,b as u,j as e,c as N,f as j,d as g}from"./index-CiVmmi8x.js";import{H as v,a as y}from"./index.esm-CVBWAuDV.js";const _=t=>t.contacts.isLoading,w="_form_1lze8_1",A="_input_1lze8_5",E="_btn_1lze8_40",L="_header_1lze8_94",r={form:w,input:A,btn:E,header:L},P="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let p=(t=21)=>{let s="",o=crypto.getRandomValues(new Uint8Array(t));for(;t--;)s+=P[o[t]&63];return s};function z(){const[t,s]=d.useState(""),[o,c]=d.useState(""),h=x(),m=u(a=>a.contacts.contacts),n=a=>{a.preventDefault();const i={id:p(),name:t,phone:o};if(m.some(f=>f.name===i.name||f.phone===i.phone)){window.alert(`${i.name} is already in contacts`);return}h(N(i)),s(""),c("")},b=p(),C=p();return e.jsxs("div",{children:[e.jsx("div",{className:r.header,children:e.jsx("h2",{children:"Phonebook"})}),e.jsxs("form",{className:r.form,onSubmit:n,children:[e.jsx("input",{id:b,className:r.input,type:"text",name:"name",pattern:"^[A-Za-ząćęłńóśźżĄĆĘŁŃÓŚŹŻ]+(?: [A-Za-ząćęłńóśźżĄĆĘŁŃÓŚŹŻ]+)+$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,value:t,placeholder:"Name",onChange:a=>s(a.target.value)}),e.jsx("input",{id:C,className:r.input,type:"tel",name:"phone",pattern:"^\\+?[1-9]\\d{1,14}$",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,value:o,placeholder:"Phone number",onChange:a=>c(a.target.value)}),e.jsx("button",{type:"submit",className:r.btn,children:"Add contact"})]})]})}const l={};function S(){const t=x(),{contacts:s,loading:o,error:c}=u(n=>n.contacts),h=u(n=>n.filter);if(d.useEffect(()=>{t(j())},[t]),o)return e.jsx("div",{children:"Loading..."});if(c)return e.jsxs("div",{children:["Error: ",c]});const m=s.filter(n=>n.name.toLowerCase().includes(h.toLowerCase()));return e.jsx("div",{children:e.jsx("ul",{children:m.map(n=>e.jsxs("li",{className:l.contact,children:[e.jsxs("span",{className:l.contactName,children:[" ",n.name,":"]}),e.jsx("span",{className:l.contactNumber,children:n.phone}),e.jsx("button",{type:"button",className:l.deleteBtn,onClick:()=>t(g(n.id)),children:"Delete"})]},n.id))})})}function H(){const t=x(),s=u(_);return d.useEffect(()=>{t(j())},[t]),e.jsxs(v,{children:[e.jsx(y,{children:e.jsx("title",{children:"Your contacts"})}),e.jsx(z,{}),e.jsx("div",{children:s&&"Request in progress..."}),e.jsx(S,{})]})}export{H as default};
